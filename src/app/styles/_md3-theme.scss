// ozlemmurzoglu.com MD3 Expressive Theme System
// ===============================================
// Modern Material Design 3 implementation with brand personality

@use '@angular/material' as mat;
@use 'sass:map';
@use 'sass:math';
@use 'sass:color';

// Import brand fonts
@import url('https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap');

// ============================================
// 1. COLOR SYSTEM - Brand-Aligned MD3 Palette
// ============================================

// Brand Colors - ozlemmurzoglu.com DNA
$brand-primary: var(--md-sys-color-primary); // Teal/Camgöbeği - Ana renk
$brand-secondary: var(--md-sys-color-secondary); // Amber/Sarı - Logo rengi
$brand-tertiary: var(--md-sys-color-tertiary); // Mercan - Vurgu rengi
$brand-warm-white: #faf8f5; // Sıcak beyaz arka plan
$brand-text: var(--md-sys-color-on-surface); // Koyu gri metin

// Create custom teal palette for MD3
@function create-custom-palette($base-color) {
  $palette: ();

  // Generate tonal values based on the base color
  $palette: map.merge(
    $palette,
    (
      0: #000000,
      10: color.scale($base-color, $lightness: -80%),
      20: color.scale($base-color, $lightness: -60%),
      25: color.scale($base-color, $lightness: -50%),
      30: color.scale($base-color, $lightness: -40%),
      35: color.scale($base-color, $lightness: -30%),
      40: color.scale($base-color, $lightness: -20%),
      50: $base-color,
      60: color.scale($base-color, $lightness: 10%),
      70: color.scale($base-color, $lightness: 25%),
      80: color.scale($base-color, $lightness: 40%),
      90: color.scale($base-color, $lightness: 60%),
      95: color.scale($base-color, $lightness: 80%),
      98: color.scale($base-color, $lightness: 92%),
      99: color.scale($base-color, $lightness: 96%),
      100: var(--md-sys-color-surface),
    )
  );

  @return $palette;
}

// Generate palettes
$primary-palette: create-custom-palette($brand-primary);
$secondary-palette: create-custom-palette($brand-secondary);
$tertiary-palette: create-custom-palette($brand-tertiary);

// MD3 Theme Configuration
$md3-theme-config: (
  color: (
    theme-type: light,
    primary: mat.$azure-palette,
    tertiary: mat.$green-palette,
    use-system-variables: true,
    system-variables-prefix: md-sys,
  ),
  typography: (
    brand-family: 'Figtree',
    plain-family: 'DM Sans',
    bold-weight: 700,
    medium-weight: 500,
    regular-weight: 400,
  ),
  density: (
    scale: 0,
  ),
);

// Create the theme
$ozlem-md3-theme: mat.define-theme($md3-theme-config);

// ============================================
// 2. SHAPE SYSTEM - Expressive Corners
// ============================================

$shape-scale: (
  none: 0,
  extra-small: 4px,
  extra-small-top: 4px 4px 0 0,
  small: 8px,
  medium: 12px,
  large: 16px,
  large-end: 0 16px 16px 0,
  large-start: 16px 0 0 16px,
  large-top: 16px 16px 0 0,
  extra-large: 28px,
  extra-large-top: 28px 28px 0 0,
  full: 9999px,
);

// ============================================
// 3. ELEVATION SYSTEM - Layered Depth
// ============================================

@mixin elevation($level: 1) {
  @if $level == 0 {
    box-shadow: none;
  } @else if $level == 1 {
    box-shadow:
      0px 1px 2px rgba(var(--md-sys-color-shadow), 0.3),
      0px 1px 3px 1px rgba(var(--md-sys-color-shadow), 0.15);
  } @else if $level == 2 {
    box-shadow:
      0px 1px 2px rgba(var(--md-sys-color-shadow), 0.3),
      0px 2px 6px 2px rgba(var(--md-sys-color-shadow), 0.15);
  } @else if $level == 3 {
    box-shadow:
      0px 4px 8px 3px rgba(var(--md-sys-color-shadow), 0.15),
      0px 1px 3px rgba(var(--md-sys-color-shadow), 0.3);
  } @else if $level == 4 {
    box-shadow:
      0px 6px 10px 4px rgba(var(--md-sys-color-shadow), 0.15),
      0px 2px 3px rgba(var(--md-sys-color-shadow), 0.3);
  } @else if $level == 5 {
    box-shadow:
      0px 8px 12px 6px rgba(var(--md-sys-color-shadow), 0.15),
      0px 4px 4px rgba(var(--md-sys-color-shadow), 0.3);
  }
}

// ============================================
// 4. MOTION SYSTEM - Expressive Animations
// ============================================

// Easing tokens
$easing-standard: cubic-bezier(0.2, 0, 0, 1);
$easing-emphasized: cubic-bezier(0.2, 0, 0, 1);
$easing-emphasized-decelerate: cubic-bezier(0.05, 0.7, 0.1, 1);
$easing-emphasized-accelerate: cubic-bezier(0.3, 0, 0.8, 0.15);
$easing-legacy: cubic-bezier(0.4, 0, 0.2, 1);

// Duration tokens
$duration-short1: 50ms;
$duration-short2: 100ms;
$duration-short3: 150ms;
$duration-short4: 200ms;
$duration-medium1: 250ms;
$duration-medium2: 300ms;
$duration-medium3: 350ms;
$duration-medium4: 400ms;
$duration-long1: 450ms;
$duration-long2: 500ms;
$duration-long3: 550ms;
$duration-long4: 600ms;
$duration-extra-long1: 700ms;
$duration-extra-long2: 800ms;
$duration-extra-long3: 900ms;
$duration-extra-long4: 1000ms;

// ============================================
// 5. TYPOGRAPHY SCALE - Figtree & DM Sans
// ============================================
// Figtree: Tüm başlıklar için (Display, Headline, Title)
// DM Sans: Tüm gövde metinleri için (Body, Label)

@mixin typography-scale {
  // Display styles - Hero moments (Figtree)
  .display-large {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(3.5rem, 8vw, 7rem);
    line-height: 1.1;
    font-weight: 800;
    letter-spacing: -0.025em;
    font-variation-settings: 'wght' 800;
  }

  .display-medium {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(2.5rem, 6vw, 5rem);
    line-height: 1.15;
    font-weight: 700;
    letter-spacing: -0.02em;
    font-variation-settings: 'wght' 700;
  }

  .display-small {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(2rem, 4vw, 3.5rem);
    line-height: 1.2;
    font-weight: 600;
    letter-spacing: -0.015em;
    font-variation-settings: 'wght' 600;
  }

  // Headlines - Section headers (Figtree)
  .headline-large {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(1.75rem, 3vw, 2.5rem);
    line-height: 1.25;
    font-weight: 600;
    letter-spacing: -0.01em;
  }

  .headline-medium {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(1.5rem, 2.5vw, 2rem);
    line-height: 1.3;
    font-weight: 600;
    letter-spacing: -0.005em;
  }

  .headline-small {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(1.25rem, 2vw, 1.5rem);
    line-height: 1.35;
    font-weight: 500;
    letter-spacing: 0;
  }

  // Titles - Component headers (Figtree)
  .title-large {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: clamp(1.125rem, 1.5vw, 1.375rem);
    line-height: 1.4;
    font-weight: 500;
    letter-spacing: 0;
    font-variation-settings: 'wght' 500;
  }

  .title-medium {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: 1rem;
    line-height: 1.5;
    font-weight: 500;
    letter-spacing: 0.15px;
    font-variation-settings: 'wght' 500;
  }

  .title-small {
    font-family: var(--md-sys-typescale-font-brand);
    font-size: 0.875rem;
    line-height: 1.45;
    font-weight: 500;
    letter-spacing: 0.1px;
    font-variation-settings: 'wght' 500;
  }

  // Body text - Reading content (DM Sans)
  .body-large {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 1rem;
    line-height: 1.6;
    font-weight: 400;
    letter-spacing: 0.5px;
    font-variation-settings:
      'opsz' 10,
      'wght' 400;
  }

  .body-medium {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 0.875rem;
    line-height: 1.55;
    font-weight: 400;
    letter-spacing: 0.25px;
    font-variation-settings:
      'opsz' 10,
      'wght' 400;
  }

  .body-small {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 0.75rem;
    line-height: 1.5;
    font-weight: 400;
    letter-spacing: 0.4px;
    font-variation-settings:
      'opsz' 10,
      'wght' 400;
  }

  // Labels - UI elements (DM Sans)
  .label-large {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 0.875rem;
    line-height: 1.4;
    font-weight: 500;
    letter-spacing: 0.1px;
    font-variation-settings:
      'opsz' 24,
      'wght' 500;
  }

  .label-medium {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 0.75rem;
    line-height: 1.35;
    font-weight: 500;
    letter-spacing: 0.5px;
    font-variation-settings:
      'opsz' 24,
      'wght' 500;
  }

  .label-small {
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 0.6875rem;
    line-height: 1.3;
    font-weight: 500;
    letter-spacing: 0.5px;
    font-variation-settings:
      'opsz' 24,
      'wght' 500;
  }
}

// ============================================
// 6. STATE LAYER SYSTEM
// ============================================

@mixin state-layer($color, $opacity: 0.08) {
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: $color;
    opacity: 0;
    transition: opacity $duration-short4 $easing-standard;
    pointer-events: none;
  }

  &:hover::before {
    opacity: $opacity;
  }

  &:focus-visible::before {
    opacity: $opacity * 1.5;
  }

  &:active::before {
    opacity: $opacity * 1.5;
  }
}

// ============================================
// 7. COMPONENT TOKENS - MD3 Specifications
// ============================================

// Button styles
@mixin button-elevated {
  @include elevation(1);
  @include state-layer($brand-primary);
  border-radius: map.get($shape-scale, full);
  padding: var(--md-sys-spacing-2) var(--md-sys-spacing-6);
  height: 40px;
  font-family: var(--md-sys-typescale-font-plain);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.1px;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    @include elevation(2);
  }

  &:active {
    @include elevation(1);
  }
}

@mixin button-filled {
  @include state-layer(white, 0.12);
  background-color: $brand-primary;
  color: white;
  border-radius: map.get($shape-scale, full);
  padding: var(--md-sys-spacing-2) var(--md-sys-spacing-6);
  height: 40px;
  border: none;
  font-family: var(--md-sys-typescale-font-plain);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.1px;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    @include elevation(1);
    background-color: color.scale($brand-primary, $lightness: 8%);
  }

  &:active {
    background-color: color.scale($brand-primary, $lightness: -8%);
  }
}

@mixin button-outlined {
  @include state-layer($brand-primary);
  background-color: transparent;
  color: $brand-primary;
  border: 1px solid currentColor;
  border-radius: map.get($shape-scale, full);
  padding: var(--md-sys-spacing-2) var(--md-sys-spacing-6);
  height: 40px;
  font-family: var(--md-sys-typescale-font-plain);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.1px;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    background-color: rgba($brand-primary, 0.08);
    border-width: 1px;
  }

  &:active {
    background-color: rgba($brand-primary, 0.12);
  }
}

@mixin button-text {
  @include state-layer($brand-primary);
  background-color: transparent;
  color: $brand-primary;
  border: none;
  border-radius: map.get($shape-scale, full);
  padding: var(--md-sys-spacing-2) var(--md-sys-spacing-4);
  height: 40px;
  font-family: var(--md-sys-typescale-font-plain);
  font-weight: 500;
  font-size: 0.875rem;
  letter-spacing: 0.1px;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    background-color: rgba($brand-primary, 0.08);
  }

  &:active {
    background-color: rgba($brand-primary, 0.12);
  }
}

// Card styles
@mixin card-elevated {
  @include elevation(1);
  background-color: white;
  border-radius: map.get($shape-scale, medium);
  transition: all $duration-medium4 $easing-emphasized;

  &:hover {
    @include elevation(2);
  }
}

@mixin card-filled {
  background-color: rgba($brand-primary, 0.05);
  border-radius: map.get($shape-scale, medium);
  transition: all $duration-medium4 $easing-emphasized;

  &:hover {
    background-color: rgba($brand-primary, 0.08);
  }
}

@mixin card-outlined {
  background-color: white;
  border: 1px solid rgba($brand-primary, 0.12);
  border-radius: map.get($shape-scale, medium);
  transition: all $duration-medium4 $easing-emphasized;

  &:hover {
    border-color: rgba($brand-primary, 0.2);
    @include elevation(1);
  }
}

// Navigation styles
@mixin nav-rail {
  width: 80px;
  background-color: rgba($brand-warm-white, 0.95);
  @include elevation(0);
  border-right: 1px solid rgba($brand-primary, 0.08);

  .nav-item {
    @include state-layer($brand-primary);
    width: 56px;
    height: 56px;
    border-radius: map.get($shape-scale, large);
    margin: var(--md-sys-spacing-3) auto;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all $duration-short4 $easing-standard;

    &.active {
      background-color: rgba($brand-primary, 0.12);
    }
  }
}

@mixin nav-drawer {
  width: 360px;
  background-color: white;
  @include elevation(1);
  border-radius: 0 map.get($shape-scale, large) map.get($shape-scale, large) 0;

  .drawer-item {
    @include state-layer($brand-primary);
    padding: var(--md-sys-spacing-3) var(--md-sys-spacing-6);
    border-radius: map.get($shape-scale, full);
    margin: var(--md-sys-spacing-1) var(--md-sys-spacing-3);
    transition: all $duration-short4 $easing-standard;

    &.active {
      background-color: rgba($brand-primary, 0.12);
    }
  }
}

// Chip styles
@mixin chip-assist {
  @include state-layer($brand-primary);
  border: 1px solid rgba($brand-primary, 0.2);
  background-color: white;
  border-radius: map.get($shape-scale, small);
  padding: var(--md-sys-spacing-1) var(--md-sys-spacing-4);
  height: 32px;
  display: inline-flex;
  align-items: center;
  gap: var(--md-sys-spacing-2);
  transition: all $duration-short4 $easing-standard;

  &:hover {
    background-color: rgba($brand-primary, 0.08);
  }
}

@mixin chip-filter {
  @include state-layer($brand-primary);
  background-color: white;
  border: 1px solid rgba($brand-primary, 0.2);
  border-radius: map.get($shape-scale, small);
  padding: var(--md-sys-spacing-1) var(--md-sys-spacing-4);
  height: 32px;
  display: inline-flex;
  align-items: center;
  gap: var(--md-sys-spacing-2);
  transition: all $duration-short4 $easing-standard;

  &.selected {
    background-color: rgba($brand-primary, 0.12);
    border-color: transparent;
  }
}

@mixin chip-input {
  @include state-layer($brand-primary);
  background-color: rgba($brand-primary, 0.08);
  border-radius: map.get($shape-scale, small);
  padding: var(--md-sys-spacing-1) var(--md-sys-spacing-3);
  height: 32px;
  display: inline-flex;
  align-items: center;
  gap: var(--md-sys-spacing-1);
  transition: all $duration-short4 $easing-standard;
}

@mixin chip-suggestion {
  @include state-layer($brand-primary);
  background-color: rgba($brand-primary, 0.05);
  border-radius: map.get($shape-scale, small);
  padding: var(--md-sys-spacing-1) var(--md-sys-spacing-4);
  height: 32px;
  display: inline-flex;
  align-items: center;
  transition: all $duration-short4 $easing-standard;

  &:hover {
    @include elevation(1);
    background-color: rgba($brand-primary, 0.08);
  }
}

// Dialog styles
@mixin dialog-container {
  @include elevation(3);
  background-color: white;
  border-radius: map.get($shape-scale, extra-large);
  min-width: 280px;
  max-width: min(560px, calc(100vw - 48px));
  padding: var(--md-sys-spacing-6);

  .dialog-header {
    margin-bottom: 16px;

    .dialog-title {
      @extend .headline-small;
      color: $brand-text;
    }
  }

  .dialog-content {
    @extend .body-medium;
    color: rgba($brand-text, 0.87);
    margin-bottom: 24px;
  }

  .dialog-actions {
    display: flex;
    justify-content: flex-end;
    gap: var(--md-sys-spacing-2);
  }
}

// List styles
@mixin list-item {
  @include state-layer($brand-primary);
  min-height: 56px;
  padding: var(--md-sys-spacing-2) var(--md-sys-spacing-4);
  display: flex;
  align-items: center;
  gap: var(--md-sys-spacing-4);
  transition: all $duration-short4 $easing-standard;

  &:hover {
    background-color: rgba($brand-primary, 0.08);
  }

  &.selected {
    background-color: rgba($brand-primary, 0.12);
  }

  .list-item-leading {
    width: 40px;
    height: 40px;
    border-radius: map.get($shape-scale, full);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .list-item-content {
    flex: 1;

    .list-item-headline {
      @extend .body-large;
      color: $brand-text;
    }

    .list-item-supporting {
      @extend .body-medium;
      color: rgba($brand-text, 0.7);
    }
  }
}

// Text field styles
@mixin text-field-outlined {
  position: relative;

  .text-field-container {
    position: relative;
    border: 1px solid rgba($brand-primary, 0.38);
    border-radius: map.get($shape-scale, extra-small);
    background-color: white;
    transition: all $duration-short4 $easing-standard;

    &:hover {
      border-color: rgba($brand-primary, 0.87);
    }

    &.focused {
      border-width: 2px;
      border-color: $brand-primary;
    }

    &.error {
      border-color: #b3261e;
    }
  }

  .text-field-input {
    padding: var(--md-sys-spacing-4);
    border: none;
    background: transparent;
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 1rem;
    line-height: 1.5;
    color: $brand-text;
    width: 100%;

    &::placeholder {
      color: rgba($brand-text, 0.38);
    }
  }

  .text-field-label {
    position: absolute;
    left: 16px;
    top: 16px;
    background-color: white;
    padding: 0 4px;
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 1rem;
    color: rgba($brand-text, 0.6);
    pointer-events: none;
    transition: all $duration-short3 $easing-standard;

    &.floating {
      top: -8px;
      font-size: 0.75rem;
      color: $brand-primary;
    }
  }
}

@mixin text-field-filled {
  position: relative;

  .text-field-container {
    position: relative;
    background-color: rgba($brand-primary, 0.04);
    border-radius: map.get($shape-scale, extra-small-top);
    border-bottom: 1px solid rgba($brand-primary, 0.38);
    transition: all $duration-short4 $easing-standard;

    &:hover {
      background-color: rgba($brand-primary, 0.08);
      border-bottom-color: rgba($brand-primary, 0.87);
    }

    &.focused {
      border-bottom-width: 2px;
      border-bottom-color: $brand-primary;
    }

    &.error {
      border-bottom-color: #b3261e;
    }
  }

  .text-field-input {
    padding: var(--md-sys-spacing-5) var(--md-sys-spacing-4) var(--md-sys-spacing-2);
    border: none;
    background: transparent;
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 1rem;
    line-height: 1.5;
    color: $brand-text;
    width: 100%;

    &::placeholder {
      color: transparent;
    }
  }

  .text-field-label {
    position: absolute;
    left: 16px;
    top: 16px;
    font-family: var(--md-sys-typescale-font-plain);
    font-size: 1rem;
    color: rgba($brand-text, 0.6);
    pointer-events: none;
    transition: all $duration-short3 $easing-standard;

    &.floating {
      top: 8px;
      font-size: 0.75rem;
      color: $brand-primary;
    }
  }
}

// FAB styles
@mixin fab-primary {
  @include elevation(3);
  @include state-layer(white, 0.12);
  background-color: $brand-primary;
  color: white;
  width: 56px;
  height: 56px;
  border-radius: map.get($shape-scale, large);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    @include elevation(4);
  }

  &:active {
    @include elevation(3);
  }

  &.extended {
    width: auto;
    padding: 0 20px;
    gap: var(--md-sys-spacing-3);
    border-radius: map.get($shape-scale, large);
  }
}

@mixin fab-secondary {
  @include elevation(3);
  @include state-layer($brand-primary);
  background-color: white;
  color: $brand-primary;
  width: 56px;
  height: 56px;
  border-radius: map.get($shape-scale, large);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    @include elevation(4);
  }

  &:active {
    @include elevation(3);
  }
}

@mixin fab-tertiary {
  @include elevation(3);
  @include state-layer($brand-primary);
  background-color: rgba($brand-primary, 0.08);
  color: $brand-primary;
  width: 56px;
  height: 56px;
  border-radius: map.get($shape-scale, large);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all $duration-medium2 $easing-emphasized;

  &:hover {
    @include elevation(4);
    background-color: rgba($brand-primary, 0.12);
  }

  &:active {
    @include elevation(3);
  }
}

// Export everything
$theme: $ozlem-md3-theme;
