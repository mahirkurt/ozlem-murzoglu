<div class="blog-page">
  <!-- Hero Section -->
  <app-hero-section
    titleKey="BLOG.TITLE"
    subtitleKey="BLOG.SUBTITLE"
    imageUrl="/assets/images/blog-hero.jpg"
  ></app-hero-section>

  <div class="container">
    <!-- Search and Filter Section -->
    <div class="filter-section">
      <div class="search-container">
        <mat-form-field appearance="outline" class="search-field">
          <mat-label>{{ 'BLOG.SEARCH_PLACEHOLDER' | translate }}</mat-label>
          <input
            matInput
            [(ngModel)]="searchQuery"
            (input)="onSearchChange()"
            [placeholder]="'BLOG.SEARCH_PLACEHOLDER' | translate"
          />
          <mat-icon matSuffix>search</mat-icon>
        </mat-form-field>
      </div>

      <div class="category-filter">
        <mat-form-field appearance="outline">
          <mat-label>{{ 'BLOG.CATEGORY_FILTER' | translate }}</mat-label>
          <mat-select [(value)]="selectedCategory" (selectionChange)="onCategoryChange()">
            <mat-option *ngFor="let category of categories" [value]="category">
              {{ category }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <button mat-stroked-button (click)="clearFilters()" class="clear-filters-btn">
        <mat-icon>clear</mat-icon>
        {{ 'BLOG.CLEAR_FILTERS' | translate }}
      </button>
    </div>

    <!-- Featured Articles -->
    <section class="featured-section" *ngIf="!searchQuery && !selectedCategory">
      <h2>{{ 'BLOG.FEATURED_ARTICLES' | translate }}</h2>
      <div class="featured-grid">
        <mat-card
          *ngFor="let article of featuredArticles$ | async; trackBy: trackByArticleId"
          class="featured-card"
          [routerLink]="['/blog', article.slug]"
        >
          <div class="article-image">
            <img [src]="article.image" [alt]="article.title" loading="lazy" />
          </div>
          <mat-card-header>
            <mat-card-title>{{ article.title }}</mat-card-title>
            <mat-card-subtitle>
              {{ article.date }} • {{ article.readTime }} {{ 'BLOG.MIN_READ' | translate }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>{{ article.excerpt }}</p>
            <div class="article-meta">
              <mat-chip-listbox>
                <mat-chip-option *ngFor="let tag of article.tags.slice(0, 3)">
                  {{ tag }}
                </mat-chip-option>
              </mat-chip-listbox>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              {{ 'BLOG.READ_MORE' | translate }}
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </section>

    <!-- All Articles -->
    <section class="articles-section">
      <h2 *ngIf="searchQuery || selectedCategory">
        {{
          searchQuery ? ('BLOG.SEARCH_RESULTS' | translate) : ('BLOG.CATEGORY_ARTICLES' | translate)
        }}
      </h2>
      <h2 *ngIf="!searchQuery && !selectedCategory">{{ 'BLOG.ALL_ARTICLES' | translate }}</h2>

      <div class="articles-grid">
        <mat-card
          *ngFor="let article of articles$ | async; trackBy: trackByArticleId"
          class="article-card"
          [routerLink]="['/blog', article.slug]"
        >
          <div class="article-image">
            <img [src]="article.image" [alt]="article.title" loading="lazy" />
          </div>
          <mat-card-header>
            <mat-card-title>{{ article.title }}</mat-card-title>
            <mat-card-subtitle>
              {{ article.date }} • {{ article.readTime }} {{ 'BLOG.MIN_READ' | translate }}
            </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content>
            <p>{{ article.excerpt }}</p>
            <div class="article-meta">
              <span class="category">{{ article.category }}</span>
              <mat-chip-listbox>
                <mat-chip-option *ngFor="let tag of article.tags.slice(0, 2)">
                  {{ tag }}
                </mat-chip-option>
              </mat-chip-listbox>
            </div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              {{ 'BLOG.READ_MORE' | translate }}
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </section>
  </div>
</div>
