<div class="content-container" [@listAnimation]="sections.length">
  <!-- SAYFA BAŞLIĞI VE GİRİŞ METNİ -->
  <header class="page-header">
    <h1 class="page-title">Çocuğunuzun Sağlığı İçin Güvenilir Kaynaklar</h1>
    <p class="page-lead">
      Amerikan Pediatri Akademisi'nin hazırladığı güvenilir bilgilerle, çocuğunuzun her yaş döneminde yanınızdayız. 
      Bu dijital sığınakta, ihtiyacınız olan tüm bilgileri bulabilir ve çocuğunuzun gelişimine güvenle eşlik edebilirsiniz.
    </p>
  </header>

  <!-- ARAMA BÖLÜMÜ (VURGU KARTI) -->
  <mat-card class="info-card accent-card search-card" *ngIf="showSearch">
    <mat-card-header>
      <mat-icon mat-card-avatar>search</mat-icon>
      <mat-card-title class="section-headline">Hızlı Arama</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Dokümanlarda ara...</mat-label>
        <input matInput 
               [(ngModel)]="searchQuery"
               (input)="onSearchChange($event)"
               placeholder="Örn: aşı takvimi, uyku düzeni, emzirme">
        <mat-icon matSuffix>search</mat-icon>
        <button mat-icon-button matSuffix 
                *ngIf="searchQuery" 
                (click)="clearSearch()"
                aria-label="Temizle">
          <mat-icon>clear</mat-icon>
        </button>
      </mat-form-field>

      <!-- Arama Sonuçları -->
      <div class="search-results" *ngIf="searchResults.length > 0">
        <mat-divider></mat-divider>
        <h3 class="results-title">
          <mat-icon>check_circle</mat-icon>
          {{ searchResults.length }} sonuç bulundu
        </h3>
        <mat-list>
          <mat-list-item *ngFor="let doc of searchResults" 
                         (click)="viewDocument(doc)"
                         class="result-item">
            <mat-icon matListItemIcon>description</mat-icon>
            <div matListItemTitle>{{ doc.title }}</div>
            <div matListItemLine>{{ getCategoryTitle(doc.categoryId) }}</div>
          </mat-list-item>
        </mat-list>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- İSTATİSTİKLER -->
  <section class="stats-section" [@fadeIn]>
    <mat-card class="stat-card">
      <mat-icon>folder_open</mat-icon>
      <div class="stat-number">{{ categories.length }}</div>
      <div class="stat-label">Kategori</div>
    </mat-card>
    <mat-card class="stat-card">
      <mat-icon>description</mat-icon>
      <div class="stat-number">{{ getTotalDocumentCount() }}</div>
      <div class="stat-label">Doküman</div>
    </mat-card>
    <mat-card class="stat-card">
      <mat-icon>verified</mat-icon>
      <div class="stat-number">AAP</div>
      <div class="stat-label">Onaylı</div>
    </mat-card>
  </section>

  <mat-divider class="section-divider"></mat-divider>

  <!-- KATEGORİLER -->
  <ng-container *ngFor="let section of sections; let i = index">
    <!-- VURGU KARTI (Önemli kategoriler) -->
    <mat-card *ngIf="section.isAccent" 
              class="info-card accent-card category-card"
              [@cardAnimation]="i">
      <mat-card-header>
        <mat-icon mat-card-avatar>{{ section.icon }}</mat-icon>
        <mat-card-title class="section-headline">{{ section.title }}</mat-card-title>
        <mat-card-subtitle>{{ section.subtitle }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="body-text">
        <p [innerHTML]="section.description"></p>
        <div class="category-grid">
          <button mat-raised-button 
                  *ngFor="let cat of section.categories"
                  (click)="navigateToCategory(cat.id)"
                  color="primary"
                  class="category-button">
            <mat-icon>{{ getQuickAccessIcon(cat.id) }}</mat-icon>
            <span>{{ cat.title }}</span>
            <span class="doc-count">({{ cat.documentCount }})</span>
          </button>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- STANDART KATEGORİ KARTI -->
    <mat-card *ngIf="!section.isAccent && !section.panels" 
              class="info-card category-card"
              [@cardAnimation]="i">
      <mat-card-header>
        <mat-icon mat-card-avatar>{{ section.icon }}</mat-icon>
        <mat-card-title class="section-headline">{{ section.title }}</mat-card-title>
        <mat-card-subtitle>{{ section.subtitle }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="body-text">
        <p [innerHTML]="section.description"></p>
        <div class="category-list">
          <mat-list>
            <mat-list-item *ngFor="let cat of section.categories"
                           (click)="navigateToCategory(cat.id)"
                           class="category-item">
              <mat-icon matListItemIcon>{{ getQuickAccessIcon(cat.id) }}</mat-icon>
              <div matListItemTitle>{{ cat.title }}</div>
              <div matListItemLine>{{ cat.documentCount }} doküman</div>
              <mat-icon matListItemMeta>arrow_forward</mat-icon>
            </mat-list-item>
          </mat-list>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- AÇILIR PANEL KARTI (Detaylı bilgiler) -->
    <mat-card *ngIf="section.panels" 
              class="info-card expansion-card"
              [@cardAnimation]="i">
      <mat-card-header>
        <mat-icon mat-card-avatar>{{ section.icon }}</mat-icon>
        <mat-card-title class="section-headline">{{ section.title }}</mat-card-title>
        <mat-card-subtitle>{{ section.subtitle }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-accordion multi>
          <mat-expansion-panel *ngFor="let panel of section.panels"
                                [expanded]="panel.expanded"
                                hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                <mat-icon>{{ panel.icon }}</mat-icon>
                {{ panel.title }}
              </mat-panel-title>
              <mat-panel-description>
                {{ panel.description }}
              </mat-panel-description>
            </mat-expansion-panel-header>
            <div class="panel-content" [innerHTML]="panel.content"></div>
            <mat-action-row *ngIf="panel.categoryId">
              <button mat-button color="primary" 
                      (click)="navigateToCategory(panel.categoryId)">
                <mat-icon>folder_open</mat-icon>
                Kategoriye Git
              </button>
            </mat-action-row>
          </mat-expansion-panel>
        </mat-accordion>
      </mat-card-content>
    </mat-card>

    <mat-divider class="section-divider" *ngIf="i < sections.length - 1"></mat-divider>
  </ng-container>

  <!-- POPÜLER DOKÜMANLAR -->
  <section class="popular-section" *ngIf="popularDocuments.length > 0">
    <h2 class="section-title">
      <mat-icon>star</mat-icon>
      En Çok İndirilen Dokümanlar
    </h2>
    <div class="popular-grid">
      <mat-card *ngFor="let doc of popularDocuments" 
                class="popular-card"
                (click)="viewDocument(doc)"
                [@fadeIn]>
        <mat-card-header>
          <mat-icon mat-card-avatar>{{ getDocumentIcon(doc) }}</mat-icon>
          <mat-card-title>{{ doc.title }}</mat-card-title>
          <mat-card-subtitle>{{ getCategoryTitle(doc.categoryId) }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions>
          <button mat-icon-button (click)="downloadDocument(doc); $event.stopPropagation()">
            <mat-icon>download</mat-icon>
          </button>
          <button mat-icon-button>
            <mat-icon>visibility</mat-icon>
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </section>

  <!-- ALT BİLGİ -->
  <footer class="page-footer">
    <mat-card class="footer-card">
      <mat-icon>info</mat-icon>
      <p>
        Tüm dokümanlar Amerikan Pediatri Akademisi (AAP) ve güvenilir sağlık kuruluşları tarafından hazırlanmıştır.
        Bilgiler güncel tutulmaya çalışılmaktadır ancak her zaman doktorunuza danışmanız önerilir.
      </p>
    </mat-card>
  </footer>
</div>