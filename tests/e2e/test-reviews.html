<!DOCTYPE html>
<html>
<head>
    <title>Test Google Place Reviews</title>
    <script>
        async function testPlaceReviews() {
            const placeId = "ChIJ83R9VUTJyhQRM2o-M-eoZyQ";
            const apiKey = "AIzaSyDZNlErCHqvQYj0gh_zTwyyzj_Lwoo7V94";
            
            // Test new Places API
            const url = `https://places.googleapis.com/v1/places/${placeId}`;
            
            try {
                const response = await fetch(url, {
                    headers: {
                        "X-Goog-Api-Key": apiKey,
                        "X-Goog-FieldMask": "displayName,rating,userRatingCount,reviews"
                    }
                });
                
                const data = await response.json();
                console.log("New API Response:", data);
                
                const resultsDiv = document.getElementById("results");
                resultsDiv.innerHTML = `
                    <h2>Place Details</h2>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
                
                // Also test with Maps JavaScript API
                testWithMapsAPI();
            } catch (error) {
                console.error("Error:", error);
                document.getElementById("results").innerHTML = `<p>Error: ${error.message}</p>`;
            }
        }
        
        function testWithMapsAPI() {
            if (window.google && window.google.maps) {
                const service = new google.maps.places.PlacesService(document.createElement("div"));
                
                service.getDetails({
                    placeId: "ChIJ83R9VUTJyhQRM2o-M-eoZyQ",
                    fields: ["name", "rating", "reviews", "user_ratings_total"]
                }, (place, status) => {
                    console.log("Maps API Status:", status);
                    console.log("Maps API Place:", place);
                    
                    if (place && place.reviews) {
                        const reviewsDiv = document.getElementById("maps-reviews");
                        reviewsDiv.innerHTML = `
                            <h3>Reviews from Maps API</h3>
                            <p>Total reviews: ${place.reviews.length}</p>
                            <ul>
                                ${place.reviews.map(r => `
                                    <li>
                                        <strong>${r.author_name}</strong> (${r.rating}â˜…)<br>
                                        ${r.text}<br>
                                        <small>${r.relative_time_description}</small>
                                    </li>
                                `).join("")}
                            </ul>
                        `;
                    }
                });
            }
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZNlErCHqvQYj0gh_zTwyyzj_Lwoo7V94&libraries=places&callback=testPlaceReviews"></script>
</head>
<body>
    <h1>Testing Google Place Reviews</h1>
    <div id="results">Loading...</div>
    <div id="maps-reviews"></div>
</body>
</html>
